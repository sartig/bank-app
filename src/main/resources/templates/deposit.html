<!DOCTYPE html>
<html>
<head xmlns:th="http://www.thymeleaf.org">
    <title>Deposit/Withdraw</title>
    
    <div th:replace="navbar :: head"></div>
	<meta charset="UTF-8">
	<link rel="stylesheet" type="text/css" href="/css/style.css">
	<link rel="stylesheet" type="text/css" href="/css/deposit.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap">

    <script>
        function validateAmount() {
		    var amountInput = document.getElementById('amountValue');
		    var amountValue = amountInput.value;
			
			// 1. Verify input is a float and more than 0
		    if (isNaN(parseFloat(amountValue)) || parseFloat(amountValue) <= 0) {
		        alert("Amount must be more than 0.");
		        return false;
		    }
		
		    // 2. Verify input has at most 2 decimal places
		    if ((amountValue.split('.')[1] || '').length > 2) {
		        alert("Amount must have at most 2 decimal places.");
		        return false;
		    }

		    return true;
		}

        function capitalizeFirstLetter(string) {
            return string.charAt(0).toUpperCase() + string.slice(1);
        }

        function displayModal() {
            var amountInput = document.getElementById('amountValue');
            var amountValue = amountInput.value;
            var selectedAction = document.querySelector('.deposit-or-withdraw-options').value;
            var accountMessage = document.querySelector('.account-box').innerText;
            
            document.getElementById('modal-amount').innerText = amountValue;
            document.getElementById('modal-action').innerText = capitalizeFirstLetter(selectedAction);
            document.getElementById('modal-account').innerText = accountMessage;

            document.getElementById('modal').style.display = 'block';
        }

        function closeModal() {
            document.getElementById('modal').style.display = 'none';
        }
	    
    </script>
</head>
<body>
    <div class="main-container">
        <div th:replace="navbar :: body"></div>

        <div class="content">
            <div class="page-top-container"></div>
            <div class="container">
                <div class="content-container">
                    <div class="title">
                        <div class="page-title">Deposit/Withdraw</div>
                        <div class="page-subtitle">Easily deposit or withdraw funds online</div>
                    </div>
                    <div class="page-below-title-container"></div>
                    <div class="centered-box">
                        
                        <!-- Modal to display after customer enters valid amount and clicks send request button -->
                        <div class="modal" id="modal" style="display: none;">
                            <div class="modal-overlay"></div>
                            <div class="modal-content">
                                <h3 class="modal-header">Transaction Confirmation</h3>
							    <form action="/deposit">
							        <label for="account" >Account</label><br><br><span id="modal-account"></span><br><br><br>
							        
							        <label for="amount">Amount</label><br><br>$<span id="modal-amount"></span><br><br><br>
							
							        <label for="actions" class="modal-deposit-withdraw-section">Deposit/Withdraw</label><br><br><span id="modal-action"></span><br><br><br>
							    </form>
							    
							    <div class="modal-buttons">
									<button type="button" class="modal-confirm-button">Confirm</button>
							    	<button type="button" class="modal-cancel-button" onclick="closeModal()">Cancel</button>
								</div>
							   
                                
                            </div>
                        </div>



                        <form action="/deposit" method="post" onsubmit="return validateAmount()" id="amountForm">
                            <label for="account" class="account">Account<br></label>
                            <div class="account-box">Bank Account 234242342</div><br>

                            <label for="amount" class="amount">Amount</label><br>
							<input type="text" class="amount-box" id="amountValue" name="amount" placeholder="$0.00"><br>


                            <label for="actions">Deposit/Withdraw</label><br>
                            <select class="deposit-or-withdraw-options">
                                <option value="select" disabled>Select</option>
                                <option value="deposit">Deposit</option>
                                <option value="withdraw">Withdraw</option>
                            </select>

                            <button type="button" class="send-request-button" onclick="if(validateAmount()) { displayModal(); }">Send Request</button>

                        </form>

                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
